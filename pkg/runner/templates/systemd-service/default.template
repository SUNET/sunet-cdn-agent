# This service file is generated by sunet-cdn-agent. Do not edit.
#
# This information is used by check_docker_containers to monitor the started containers:
# COMPOSE_FILE=/opt/sunet-cdn/compose/{{.OrgName}}/cdn-cache-{{.ServiceName}}/docker-compose.yml
#
[Unit]
Description=SUNET CDN Cache {{.OrgName}}-{{.ServiceName}}
After=docker.service
BindsTo=docker.service
Conflicts=shutdown.target reboot.target halt.target

[Service]
TimeoutStartSec=0
TimeoutStopSec=30
Restart=always
RestartSec=10

SyslogIdentifier=sunet-cdn-cache-{{.OrgID}}-{{.ServiceID}}

WorkingDirectory=/

# To make docker pull work with basic-auth credentials
Environment="HOME=/root"

ExecStart=/usr/bin/docker compose -f {{.ComposeFile}} up --force-recreate --no-deps

ExecStop=/usr/bin/docker compose -f {{.ComposeFile}} down

NotifyAccess=all

[Install]
WantedBy=multi-user.target
